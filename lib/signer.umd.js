!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("node-fetch"),require("@metamask/eth-sig-util"),require("@ethersproject/bytes"),require("@tharsis/proto"),require("@tharsis/transactions")):"function"==typeof define&&define.amd?define(["exports","node-fetch","@metamask/eth-sig-util","@ethersproject/bytes","@tharsis/proto","@tharsis/transactions"],t):t((e||self).evmosTsWallet={},e.nodeFetch,e.ethSigUtil,e.bytes,e.proto,e.transactions)}(this,function(e,t,n,s,o,r){function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=/*#__PURE__*/i(t);const c={chainId:9e3,cosmosChainId:"evmos_9000-1"};e.LOCALNET_CHAIN=c,e.LOCALNET_FEE={amount:"20",denom:"aevmos",gas:"200000"},e.MAINNET_CHAIN={chainId:9001,cosmosChainId:"evmos_9001-2"},e.MAINNET_FEE={amount:"5000",denom:"aevmos",gas:"600000"},e.TESTNET_CHAIN={chainId:9001,cosmosChainId:"evmos_9001-2"},e.TESTNET_FEE={amount:"5000",denom:"atevmos",gas:"600000"},e.broadcast=function(e,t="http://127.0.0.1:1317"){try{return Promise.resolve(a.default(`${t}/cosmos/tx/v1beta1/txs`,{method:"post",body:e,headers:{"Content-Type":"application/json"}})).then(function(e){return Promise.resolve(e.json())})}catch(e){return Promise.reject(e)}},e.getSender=function(e,t="http://127.0.0.1:1317"){try{return Promise.resolve(a.default(`${t}/cosmos/auth/v1beta1/accounts/${e}`)).then(function(t){return Promise.resolve(t.json()).then(function(t){return{accountAddress:e,sequence:parseInt(t.account.base_account.sequence,10),accountNumber:parseInt(t.account.base_account.account_number,10),pubkey:t.account.base_account.pub_key.key}})})}catch(e){return Promise.reject(e)}},e.signTransaction=function(e,t,n="BROADCAST_MODE_BLOCK"){try{const r=`0x${Buffer.from(t.signDirect.signBytes,"base64").toString("hex")}`,i=e._signingKey().signDigest(r),a=s.splitSignature(i),c=s.arrayify(s.concat([a.r,a.s])),u=`{ "tx_bytes": [${o.createTxRaw(t.signDirect.body.serializeBinary(),t.signDirect.authInfo.serializeBinary(),[c]).message.serializeBinary().toString()}], "mode": "${n}" }`;return Promise.resolve(u)}catch(e){return Promise.reject(e)}},e.singTransactionUsingEIP712=function(e,t,o,i=c,a="BROADCAST_MODE_BLOCK"){try{const c=s.arrayify(n.TypedDataUtils.eip712Hash(o.eipToSign,n.SignTypedDataVersion.V4));return Promise.resolve(e._signingKey().signDigest(c)).then(function(e){const n=s.joinSignature(e),c=r.signatureToWeb3Extension(i,{accountAddress:t},n);return`{ "tx_bytes": [${r.createTxRawEIP712(o.legacyAmino.body,o.legacyAmino.authInfo,c).message.serializeBinary().toString()}], "mode": "${a}" }`})}catch(e){return Promise.reject(e)}}});
//# sourceMappingURL=signer.umd.js.map
